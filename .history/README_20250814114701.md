# Content Generation Pipeline: Reddit to Rick and Morty Videos

A Python-based content pipeline that automatically generates Rick and Morty style videos from Reddit posts. The pipeline uses AI to generate dynamic conversations between Rick and Morty about Reddit posts, converts them into character-accurate dialogue videos with text-to-speech, and creates engaging short-form content.

## Features

- ðŸ¤– AI-powered dialogue generation using OpenRouter/OpenAI
- ðŸŽ­ Character-accurate Rick and Morty dialogue style with burps and catchphrases
- ðŸŽ¤ Text-to-speech audio generation using Google TTS
- ðŸŽ¬ Automated video creation with MoviePy
- ðŸ“± Flexible Reddit post fetching (top/hot/new, time filters)
- ðŸ“Š Detailed logging and error tracking
- âš¡ Fast and efficient video processing

## Directory Structure

```
content_pipeline/
â”œâ”€â”€ ingestion/               # Reddit data ingestion
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ reddit_ingest.py    # Reddit API interaction
â”œâ”€â”€ story_generation/        # Dialogue creation
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ dialogue_template.py # Dialogue formatting
â”‚   â””â”€â”€ story_generator.py   # Story generation logic
â”œâ”€â”€ content_generation/      # Audio/video creation
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ audio_gen.py        # Text-to-speech
â”‚   â””â”€â”€ video_gen.py        # Video assembly
â”œâ”€â”€ .env                    # API credentials
â”œâ”€â”€ setup.py               # Package configuration
â””â”€â”€ create_video.py        # Main script
```

## Prerequisites

- Python 3.12 or higher
- Reddit API credentials (from https://www.reddit.com/prefs/apps)
- OpenRouter API key (from https://openrouter.ai/)
- FFmpeg (required by moviepy for video processing)

## Installation

1. Clone the repository:
```bash
git clone <your-repo-url>
cd content_pipeline
```

2. Create and activate a virtual environment:
```bash
python -m venv .venv
# On Windows
.venv\Scripts\activate
# On Unix or MacOS
source .venv/bin/activate
```

3. Install dependencies:
```bash
pip install -r requirements.txt
```

4. Set up your environment variables in `.env`:
```env
REDDIT_CLIENT_ID=your_client_id
REDDIT_CLIENT_SECRET=your_client_secret
REDDIT_USER_AGENT=ContentPipeline/0.1.0
OPENROUTER_API_KEY=your_openrouter_api_key
```
pip install -e .
```

This will install all required dependencies:
- `praw`: Reddit API wrapper
- `python-dotenv`: Environment variable management
- `gTTS`: Google Text-to-Speech
- `moviepy`: Video creation and editing
- `numpy`: Required for video processing
- `Pillow`: Image processing

## Configuration

1. Create a `.env` file in the project root with your Reddit API credentials:
```env
REDDIT_CLIENT_ID=your_client_id
REDDIT_CLIENT_SECRET=your_client_secret
REDDIT_USER_AGENT=ContentPipeline/0.1.0
```

To get Reddit API credentials:
1. Go to https://www.reddit.com/prefs/apps
2. Click "create another app..."
3. Choose "script"
4. Fill in any name and description
5. For "redirect uri" put http://localhost:8080
6. Click create app
7. Use the client ID and secret in your .env file

## Usage

### Basic Usage

Generate a video from top posts in r/beermoney:
```bash
python create_video.py beermoney -n 3 -s top -t week
```

### Command Line Arguments

- `subreddit`: Name of the subreddit to pull posts from
- `-n, --num-posts`: Number of posts to process (default: 3)
- `-s, --sort`: Sort method ['hot', 'new', 'rising', 'top'] (default: 'top')
- `-t, --time-filter`: Time filter for top posts ['all', 'year', 'month', 'week', 'day', 'hour'] (default: 'week')
- `-o, --output-dir`: Output directory (default: 'output')

### Output Structure

The script creates:
- `output/dialogues.json`: Generated dialogue scripts
- `output/dialogue_X/`: Audio files for each dialogue
- `output/final_video.mp4`: The final compiled video

## How It Works

1. **Data Ingestion** (`reddit_ingest.py`):
   - Connects to Reddit using PRAW
   - Fetches posts based on specified criteria
   - Filters and cleans post content

2. **Story Generation** (`story_generator.py`, `dialogue_template.py`):
   - Transforms Reddit posts into dialogue format
   - Adds Rick and Morty's characteristic speech patterns
   - Structures conversations naturally

3. **Content Generation** (`audio_gen.py`, `video_gen.py`):
   - Converts dialogue to speech using Google TTS
   - Generates audio files for each line
   - Creates video with background and audio

## Future Improvements

- Add custom character voices using voice cloning
- Implement better text-to-speech with emotional inflections
- Add animations and visual effects
- Improve dialogue generation with AI
- Add support for more content sources
- Implement custom background images or animations
- Add more character interactions and complexity
- Support for multiple languages
- Add background music and sound effects

## Contributing

Feel free to:
- Submit bug reports
- Propose new features
- Add better dialogue templates
- Improve video generation
- Enhance audio quality
- Add new content sources

## License

[Your chosen license]