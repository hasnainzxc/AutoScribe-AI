# Content Generation Pipeline

A Python-based content pipeline that automatically generates Rick and Morty style videos from Reddit posts. The pipeline fetches interesting posts from Reddit, converts them into dialogues between Rick and Morty, and creates videos with text-to-speech audio.

This repository contains a modular, extensible framework for automating the creation of short-form content from Reddit posts. It is designed to evolve over time: you can start with simple heuristics and gradually swap in more advanced components (e.g. large language models, richer dialogue generators) without having to change the overall structure.

## Features

- Reddit post fetching with PRAW
- Dialogue generation in Rick and Morty style
- Text-to-speech audio generation using Google TTS
- Automated video creation with MoviePy
- Configurable post selection (top/hot/new, time filters)

## Directory Structure

```
content_pipeline/
├── ingestion/               # Reddit data ingestion
│   ├── __init__.py
│   └── reddit_ingest.py    # Reddit API interaction
├── story_generation/        # Dialogue creation
│   ├── __init__.py
│   ├── dialogue_template.py # Dialogue formatting
│   └── story_generator.py   # Story generation logic
├── content_generation/      # Audio/video creation
│   ├── __init__.py
│   ├── audio_gen.py        # Text-to-speech
│   └── video_gen.py        # Video assembly
├── .env                    # API credentials
├── setup.py               # Package configuration
└── create_video.py        # Main script
```

## Prerequisites

- Python 3.x
- Reddit API credentials (see Configuration section)
- FFmpeg (required by moviepy for video processing)

## Installation

1. Clone the repository:
```bash
git clone <your-repo-url>
cd content_pipeline
```

2. Install the package in development mode:
```bash
pip install -e .
```

This will install all required dependencies:
- `praw`: Reddit API wrapper
- `python-dotenv`: Environment variable management
- `gTTS`: Google Text-to-Speech
- `moviepy`: Video creation and editing
- `numpy`: Required for video processing
- `Pillow`: Image processing

## Configuration

1. Create a `.env` file in the project root with your Reddit API credentials:
```env
REDDIT_CLIENT_ID=your_client_id
REDDIT_CLIENT_SECRET=your_client_secret
REDDIT_USER_AGENT=ContentPipeline/0.1.0
```

To get Reddit API credentials:
1. Go to https://www.reddit.com/prefs/apps
2. Click "create another app..."
3. Choose "script"
4. Fill in any name and description
5. For "redirect uri" put http://localhost:8080
6. Click create app
7. Use the client ID and secret in your .env file

## Usage

### Basic Usage

Generate a video from top posts in r/beermoney:
```bash
python create_video.py beermoney -n 3 -s top -t week
```

### Command Line Arguments

- `subreddit`: Name of the subreddit to pull posts from
- `-n, --num-posts`: Number of posts to process (default: 3)
- `-s, --sort`: Sort method ['hot', 'new', 'rising', 'top'] (default: 'top')
- `-t, --time-filter`: Time filter for top posts ['all', 'year', 'month', 'week', 'day', 'hour'] (default: 'week')
- `-o, --output-dir`: Output directory (default: 'output')

### Output Structure

The script creates:
- `output/dialogues.json`: Generated dialogue scripts
- `output/dialogue_X/`: Audio files for each dialogue
- `output/final_video.mp4`: The final compiled video

## Extending the Pipeline

This project is intentionally minimal to get you started.  Consider
adding the following as your needs grow:

* **Improved summarisation**: Replace the naive sentence extraction with
  calls to a summarisation model or LLM.
* **Richer dialogue**: Use an LLM to craft multiple exchanges, add
  humour or storytelling, and customise the personalities of the host
  and expert characters.
* **Additional ingestion sources**: Create modules under `ingestion/`
  to pull content from RSS feeds, blogs, or other social media.
* **Media generation**: Integrate video and audio synthesis tools
  downstream of this pipeline to produce complete animated clips.

Feel free to fork this repository and experiment.  Contributions are
welcome!